<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
<title>Monitor Nabor√≥w PSF ≈ölƒÖskie</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{min-height:100vh;background:linear-gradient(145deg,#0f172a,#1e1b4b 50%,#0f172a);font-family:'Segoe UI',-apple-system,sans-serif;color:#e2e8f0}
.w{max-width:940px;margin:0 auto;padding:0 16px}
.hd{background:rgba(255,255,255,0.02);border-bottom:1px solid rgba(255,255,255,0.06);padding:18px 0 0}
h1{font-size:19px;font-weight:800;background:linear-gradient(90deg,#60a5fa,#c084fc,#4ade80);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:2px}
.su{font-size:11px;color:#475569;margin-bottom:12px}
.wt{display:flex;gap:0;overflow-x:auto;border-bottom:2px solid rgba(255,255,255,0.06)}
.wt button{padding:9px 16px;border:none;cursor:pointer;font-size:13px;font-weight:700;background:0;color:#475569;border-bottom:2px solid transparent;margin-bottom:-2px;text-align:left;font-family:inherit;white-space:nowrap}
.wt button.on{color:#60a5fa;border-bottom-color:#60a5fa}
.wt small{display:block;font-size:10px;font-weight:500;opacity:.7}
.fb{display:flex;gap:6px;margin:14px 0 6px;flex-wrap:wrap;align-items:center}
.fl{font-size:11px;color:#475569;font-weight:700;margin-right:2px}
.fg{display:inline-flex;background:rgba(255,255,255,0.04);border-radius:8px;padding:2px;border:1px solid rgba(255,255,255,0.06);flex-wrap:wrap}
.fp{padding:6px 12px;border-radius:6px;border:none;cursor:pointer;font-size:12px;font-weight:600;background:0;color:#64748b;font-family:inherit;white-space:nowrap;transition:all .12s}
.fp:hover{color:#94a3b8}
.fp.on{color:#60a5fa;background:rgba(96,165,250,0.15)}
.ss{display:flex;gap:8px;margin:12px 0 16px;flex-wrap:wrap}
.ss>div{flex:1 1 100px;background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.05);border-radius:9px;padding:10px 12px}
.ss b{display:block;font-size:22px;font-weight:800;line-height:1.1}
.ss span{font-size:9px;color:#475569;font-weight:700;text-transform:uppercase;letter-spacing:.3px}
.sg{margin-bottom:20px}
.sh{display:flex;align-items:center;gap:7px;margin-bottom:8px}
.sb{width:3px;height:20px;border-radius:2px}
.sh h2{font-size:14px;font-weight:700;text-transform:capitalize;margin:0}
.bg{font-size:10px;padding:2px 7px;border-radius:10px;font-weight:700}
.cl{display:flex;flex-direction:column;gap:7px}
.cd{border-radius:11px;padding:13px 16px}
.ct{display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;gap:8px}
.cm{flex:1;min-width:180px}
.tg{display:flex;gap:4px;margin-bottom:4px;flex-wrap:wrap}
.tg span{font-size:10px;font-weight:700;padding:2px 6px;border-radius:4px}
.t1{background:rgba(74,222,128,0.15);color:#4ade80}
.t6{background:rgba(251,146,60,0.15);color:#fb923c}
.tt{background:rgba(255,255,255,0.05);color:#94a3b8;font-weight:600}
.cd h3{font-size:14px;font-weight:700;color:#f1f5f9;margin:0}
.nm{font-size:11px;color:#64748b}
.dt{font-size:12px;color:#94a3b8;margin-top:3px}
.sz{display:flex;gap:5px;flex-wrap:wrap;margin-top:5px;align-items:center}
.sz span{font-size:10px;padding:2px 7px;border-radius:5px;font-weight:700}
.cs{display:flex;flex-direction:column;gap:6px;align-items:flex-end}
.bn{padding:7px 13px;border-radius:7px;text-decoration:none;font-size:11px;font-weight:700;white-space:nowrap;display:inline-block}
.em{text-align:center;padding:40px;color:#475569;font-size:13px}
.ft{margin:24px 0 30px;padding:12px 16px;background:rgba(255,255,255,0.02);border-radius:9px;border:1px solid rgba(255,255,255,0.04);font-size:11px;color:#475569;line-height:1.7}
@media(max-width:600px){.ct{flex-direction:column}.cs{align-items:flex-start}}
</style>
</head>
<body>
<div id="root"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
<script type="text/babel">
const {useState,useEffect}=React,h=React.createElement;

const SC={centralny:{a:"#60a5fa",b:"#1e3a5f"},zachodni:{a:"#4ade80",b:"#1a3d2e"},po≈Çudniowy:{a:"#c084fc",b:"#3b1f6e"},p√≥≈Çnocny:{a:"#fb923c",b:"#5c3310"}};

function gM(d){const t=new Date(d),y=t.getDay();t.setDate(t.getDate()-y+(y===0?-6:1));t.setHours(0,0,0,0);return t}
function aD(d,n){const r=new Date(d);r.setDate(r.getDate()+n);return r}
function fm(d){return d.toISOString().slice(0,10)}
function fP(s){return s.replace(/-/g,".")}
function gW(){const m=gM(new Date());return[0,1,2].map(i=>{const s=aD(m,i*7),e=aD(s,4);return{s:fm(s),e:fm(e),l:i===0?"Ten tydzie≈Ñ":i===1?"Przysz≈Çy tydzie≈Ñ":"Za 2 tygodnie"}})}

function App(){
  const[wi,sW]=useState(0),[pf,sP]=useState("all"),[sf,sS]=useState("all");
  const[data,setData]=useState(null),[err,setErr]=useState(null);

  useEffect(()=>{fetch('data.json?v='+Date.now(),{cache:'no-store'}).then(r=>{if(!r.ok)throw new Error('HTTP '+r.status);return r.json()}).then(d=>setData(d)).catch(e=>setErr(e.message))},[]);

  useEffect(()=>{const k='psf-last-refresh';const iv=setInterval(()=>{const n=new Date();if(n.getDay()===0&&n.getHours()>=12){const today=n.toDateString();if(localStorage.getItem(k)!==today){localStorage.setItem(k,today);window.location.href=window.location.pathname+'?r='+Date.now()}}},15000);return()=>clearInterval(iv)},[]);

  if(err)return h("div",{style:{color:"#f87171",textAlign:"center",padding:60}},"B≈ÇƒÖd ≈Çadowania danych: "+err);
  if(!data)return h("div",{style:{color:"#64748b",textAlign:"center",padding:60}},"≈Åadowanie danych...");

  const{D,LK,NM,SZ}=data;
  const wk=gW(),w=wk[wi];
  let en=[];
  if(pf==="all"||pf==="10.17")D["10.17"].forEach(x=>{if(x.od>=w.s&&x.od<=w.e)en.push({...x,p:"10.17"})});
  if(pf==="all"||pf==="6.06")D["6.06"].forEach(x=>{if(x.od>=w.s&&x.od<=w.e)en.push({...x,p:"6.06"})});
  if(sf!=="all")en=en.filter(x=>x.sub===sf);
  const gr={};en.forEach(x=>{if(!gr[x.sub])gr[x.sub]=[];gr[x.sub].push(x)});
  const subs=["centralny","zachodni","po≈Çudniowy","p√≥≈Çnocny"];

  return h("div",null,
    h("div",{className:"hd"},h("div",{className:"w"},
      h("h1",null,"üìã Monitor Nabor√≥w PSF ≈ölƒÖskie"),
      h("p",{className:"su"},"10.17 (zielone kompetencje) + 6.06 (us≈Çugi rozwojowe) ‚Ä¢ do 5 000 z≈Ç/os. ‚Ä¢ 95% dofinansowania ‚Ä¢ auto-od≈õwie≈ºanie ndz. 12:00 ‚Ä¢ dane z data.json"),
      h("div",{className:"wt"},wk.map((x,i)=>h("button",{key:i,className:wi===i?"on":"",onClick:()=>sW(i)},h("div",null,x.l),h("small",null,fP(x.s)+" ‚Äì "+fP(x.e)))))
    )),
    h("div",{className:"w",style:{paddingTop:12,paddingBottom:40}},
      h("div",{className:"fb"},
        h("span",{className:"fl"},"Projekt:"),
        h("div",{className:"fg"},
          ["all","10.17","6.06"].map(v=>h("button",{key:v,className:"fp"+(pf===v?" on":""),onClick:()=>sP(v),
            style:pf===v&&v==="10.17"?{color:"#4ade80",background:"rgba(74,222,128,0.15)"}:pf===v&&v==="6.06"?{color:"#fb923c",background:"rgba(251,146,60,0.15)"}:{}
          },v==="all"?"Wszystkie":v))
        ),
        h("span",{className:"fl",style:{marginLeft:8}},"Subregion:"),
        h("div",{className:"fg"},
          h("button",{className:"fp"+(sf==="all"?" on":""),onClick:()=>sS("all")},"Wszystkie"),
          subs.map(s=>h("button",{key:s,className:"fp"+(sf===s?" on":""),onClick:()=>sS(s),
            style:sf===s?{color:SC[s].a,background:SC[s].a+"22"}:{}},s))
        ),
      ),
      h("div",{className:"ss"},
        [{l:"≈ÅƒÖcznie",v:en.length,c:"#60a5fa"},{l:"10.17",v:en.filter(x=>x.p==="10.17").length,c:"#4ade80"},{l:"6.06",v:en.filter(x=>x.p==="6.06").length,c:"#fb923c"},{l:"Subregion√≥w",v:Object.keys(gr).length,c:"#c084fc"}].map(s=>
          h("div",{key:s.l},h("b",{style:{color:s.c}},s.v),h("span",null,s.l)))
      ),
      Object.entries(gr).sort(([a],[b])=>a.localeCompare(b,"pl")).map(([sub,items])=>{
        const c=SC[sub]||SC.centralny;
        return h("div",{key:sub,className:"sg"},
          h("div",{className:"sh"},h("div",{className:"sb",style:{background:c.a}}),h("h2",{style:{color:c.a}},"Subregion "+sub),h("span",{className:"bg",style:{background:c.a+"18",color:c.a}},items.length)),
          h("div",{className:"cl"},items.map((e,i)=>{
            const sz=SZ[e.op];
            return h("div",{key:i,className:"cd",style:{background:"linear-gradient(135deg,"+c.b+"cc,#0f172a)",border:"1px solid "+c.a+"18"}},
              h("div",{className:"ct"},
                h("div",{className:"cm"},
                  h("div",{className:"tg"},h("span",{className:e.p==="10.17"?"tg t1":"tg t6"},e.p),h("span",{className:"tg tt"},e.typ)),
                  h("h3",null,e.op),
                  h("div",{className:"nm"},NM[e.op]||""),
                  h("div",{className:"dt"},"üìÖ "+fP(e.od)+" ‚Äî "+fP(e.do)),
                  h("div",{className:"sz"},
                    sz&&sz.cel?h("span",{style:{fontSize:10,padding:"2px 7px",borderRadius:5,fontWeight:700,background:"rgba(96,165,250,0.12)",color:"#60a5fa"}},"üéØ Cel: "+sz.cel+" os."):null,
                    sz&&sz.warn?h("span",{style:{fontSize:10,padding:"2px 7px",borderRadius:5,fontWeight:700,background:"rgba(239,68,68,0.12)",color:"#f87171"}},sz.warn):null,
                    h("span",{style:{fontSize:10,padding:"2px 7px",borderRadius:5,fontWeight:600,background:"rgba(74,222,128,0.08)",color:"#4ade80"}},"do 5 000 z≈Ç ‚Ä¢ 95%")
                  )
                ),
                h("div",{className:"cs"},LK[e.op]?h("a",{href:LK[e.op],target:"_blank",rel:"noopener noreferrer",className:"bn",style:{background:c.a+"12",border:"1px solid "+c.a+"28",color:c.a}},"üîó Strona"):null)
              ))
          })))
      }),
      en.length===0?h("div",{className:"em"},"Brak nabor√≥w w tym tygodniu dla wybranych filtr√≥w."):null,
      h("div",{className:"ft"},h("strong",{style:{color:"#64748b"}},"‚ÑπÔ∏è "),"Dane: harmonogram 10.17 (v11.1.1, 13.02.2026) + 6.06 (v6, 29.12.2025). Wszystkie projekty: do 5 000 z≈Ç/os., 95% dofinansowania, 5% wk≈Çad w≈Çasny. Znane cele projekt√≥w z mapadotacji.gov.pl. SCD C1 ‚Äî operator wstrzyma≈Ç nabory. Dane pobierane z data.json. Auto-od≈õwie≈ºanie co ndz. od 12:00.")
    )
  );
}
ReactDOM.createRoot(document.getElementById("root")).render(h(App));
</script>
</body>
</html>
